{"version":3,"file":"u0MAGmsp.min.js","names":["engineDescriptions: Record<string, [string, string]> | undefined","engineElements: NodeListOf<HTMLElement>","engineToggles: NodeListOf<HTMLInputElement>","enableAllEngines: NodeListOf<HTMLElement>","disableAllEngines: NodeListOf<HTMLElement>"],"sources":["../../../../../client/simple/src/js/main/preferences.ts"],"sourcesContent":["// SPDX-License-Identifier: AGPL-3.0-or-later\r\n\r\nimport { http, listen, settings } from \"../toolkit.ts\";\r\nimport { assertElement } from \"../util/assertElement.ts\";\r\n\r\nlet engineDescriptions: Record<string, [string, string]> | undefined;\r\n\r\nconst loadEngineDescriptions = async (): Promise<void> => {\r\n  if (engineDescriptions) return;\r\n  try {\r\n    const res = await http(\"GET\", \"engine_descriptions.json\");\r\n    engineDescriptions = await res.json();\r\n  } catch (error) {\r\n    console.error(\"Error fetching engineDescriptions:\", error);\r\n  }\r\n  if (!engineDescriptions) return;\r\n\r\n  for (const [engine_name, [description, source]] of Object.entries(engineDescriptions)) {\r\n    const elements = document.querySelectorAll<HTMLElement>(`[data-engine-name=\"${engine_name}\"] .engine-description`);\r\n    const sourceText = ` (<i>${settings.translations?.Source}:&nbsp;${source}</i>)`;\r\n\r\n    for (const element of elements) {\r\n      element.innerHTML = description + sourceText;\r\n    }\r\n  }\r\n};\r\n\r\nconst toggleEngines = (enable: boolean, engineToggles: NodeListOf<HTMLInputElement>): void => {\r\n  for (const engineToggle of engineToggles) {\r\n    // check if element visible, so that only engines of the current category are modified\r\n    if (engineToggle.offsetParent) {\r\n      engineToggle.checked = !enable;\r\n    }\r\n  }\r\n};\r\n\r\nconst engineElements: NodeListOf<HTMLElement> = document.querySelectorAll<HTMLElement>(\"[data-engine-name]\");\r\nfor (const engineElement of engineElements) {\r\n  listen(\"mouseenter\", engineElement, loadEngineDescriptions);\r\n}\r\n\r\nconst engineToggles: NodeListOf<HTMLInputElement> = document.querySelectorAll<HTMLInputElement>(\r\n  \"tbody input[type=checkbox][class~=checkbox-onoff]\"\r\n);\r\n\r\nconst enableAllEngines: NodeListOf<HTMLElement> = document.querySelectorAll<HTMLElement>(\".enable-all-engines\");\r\nfor (const engine of enableAllEngines) {\r\n  listen(\"click\", engine, () => toggleEngines(true, engineToggles));\r\n}\r\n\r\nconst disableAllEngines: NodeListOf<HTMLElement> = document.querySelectorAll<HTMLElement>(\".disable-all-engines\");\r\nfor (const engine of disableAllEngines) {\r\n  listen(\"click\", engine, () => toggleEngines(false, engineToggles));\r\n}\r\n\r\nlisten(\"click\", \"#copy-hash\", async function (this: HTMLElement) {\r\n  const target = this.parentElement?.querySelector<HTMLPreElement>(\"pre\");\r\n  assertElement(target);\r\n\r\n  if (window.isSecureContext) {\r\n    await navigator.clipboard.writeText(target.innerText);\r\n  } else {\r\n    const selection = window.getSelection();\r\n    if (selection) {\r\n      const range = document.createRange();\r\n      range.selectNodeContents(target);\r\n      selection.removeAllRanges();\r\n      selection.addRange(range);\r\n      document.execCommand(\"copy\");\r\n    }\r\n  }\r\n\r\n  if (this.dataset.copiedText) {\r\n    this.innerText = this.dataset.copiedText;\r\n  }\r\n});\r\n"],"mappings":"4FAKA,IAAIA,EAEE,EAAyB,SAA2B,CACpD,MACJ,IAAI,CAEF,EAAqB,MADT,MAAM,EAAK,MAAO,2BAA2B,EAC1B,MAAM,OAC9B,EAAO,CACd,QAAQ,MAAM,qCAAsC,EAAM,CAEvD,KAEL,IAAK,GAAM,CAAC,EAAa,CAAC,EAAa,MAAY,OAAO,QAAQ,EAAmB,CAAE,CACrF,IAAM,EAAW,SAAS,iBAA8B,sBAAsB,EAAY,wBAAwB,CAC5G,EAAa,QAAQ,EAAS,cAAc,OAAO,SAAS,EAAO,OAEzE,IAAK,IAAM,KAAW,EACpB,EAAQ,UAAY,EAAc,KAKlC,GAAiB,EAAiB,IAAsD,CAC5F,IAAK,IAAM,KAAgB,EAErB,EAAa,eACf,EAAa,QAAU,CAAC,IAKxBC,EAA0C,SAAS,iBAA8B,qBAAqB,CAC5G,IAAK,IAAM,KAAiB,EAC1B,EAAO,aAAc,EAAe,EAAuB,CAG7D,IAAMC,EAA8C,SAAS,iBAC3D,oDACD,CAEKC,EAA4C,SAAS,iBAA8B,sBAAsB,CAC/G,IAAK,IAAM,KAAU,EACnB,EAAO,QAAS,MAAc,EAAc,GAAM,EAAc,CAAC,CAGnE,IAAMC,EAA6C,SAAS,iBAA8B,uBAAuB,CACjH,IAAK,IAAM,KAAU,EACnB,EAAO,QAAS,MAAc,EAAc,GAAO,EAAc,CAAC,CAGpE,EAAO,QAAS,aAAc,gBAAmC,CAC/D,IAAM,EAAS,KAAK,eAAe,cAA8B,MAAM,CAGvE,GAFA,EAAc,EAAO,CAEjB,OAAO,gBACT,MAAM,UAAU,UAAU,UAAU,EAAO,UAAU,KAChD,CACL,IAAM,EAAY,OAAO,cAAc,CACvC,GAAI,EAAW,CACb,IAAM,EAAQ,SAAS,aAAa,CACpC,EAAM,mBAAmB,EAAO,CAChC,EAAU,iBAAiB,CAC3B,EAAU,SAAS,EAAM,CACzB,SAAS,YAAY,OAAO,EAI5B,KAAK,QAAQ,aACf,KAAK,UAAY,KAAK,QAAQ,aAEhC"}